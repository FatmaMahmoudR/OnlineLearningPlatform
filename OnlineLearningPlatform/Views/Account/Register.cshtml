@using OnlineLearningPlatform.Entities.ViewModels.Account
@model RegisterViewModel

@{
    ViewData["Title"] = "Register";
    Layout = "_AccountLayout";
}

<section class="vh-100" style="background-color: #f7f9fc;">
    <div class="container py-5 h-100">
        <div class="row d-flex align-items-center justify-content-center h-100">
            <div class="col-md-8 col-lg-7 col-xl-6 text-center">
                <img src="https://i.pinimg.com/originals/f2/6e/b4/f26eb4efb0f499e859788f7eb822ca98.gif"
                     class="img-fluid" alt="Register illustration" style="max-width: 80%; height: auto; background-color: transparent;">
            </div>
            <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
                <div class="card shadow" style="border-radius: 1rem; background-color: transparent;">
                    <div class="card-body p-5">
                        <h2 class="mb-4">Create New Account</h2>

                        <form asp-action="Register" method="post" id="registerForm">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                            <!-- Username input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form1Example13">Username</label>
                                <input asp-for="UserName" id="form1Example13" class="form-control form-control-lg" placeholder="Enter your username" autocomplete="off" />
                                <span asp-validation-for="UserName" class="text-danger"></span>
                            </div>

                            <!-- Email input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form1Example23">Email address</label>
                                <input asp-for="Email" id="form1Example23" class="form-control form-control-lg" placeholder="Enter your email" autocomplete="off" />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>

                            <!-- Password input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form1Example33">Password</label>
                                <input asp-for="Password" id="form1Example33" class="form-control form-control-lg" placeholder="Enter your password" autocomplete="off" />
                                <span asp-validation-for="Password" class="text-danger"></span>
                            </div>

                            <!-- Confirm Password input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form1Example43">Confirm Password</label>
                                <input asp-for="ConfirmPassword" id="form1Example43" class="form-control form-control-lg" placeholder="Confirm your password" autocomplete="off" />
                                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                            </div>

                            <div class="d-flex justify-content-end">
                                <div class="wrapper">
                                    <button type="submit" id="submitButton" style="width: 120px;">
                                        <span>Register</span>
                                        <div class="success">
                                            <svg xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 29.756 29.756" style="enable-background:new 0 0 29.756 29.756;" xml:space="preserve">
                                            <path d="M29.049,5.009L28.19,4.151c-0.943-0.945-2.488-0.945-3.434,0L10.172,18.737l-5.175-5.173
                                                    c-0.943-0.944-2.489-0.944-3.432,0.001l-0.858,0.857c-0.943,0.944-0.943,2.489,0,3.433l7.744,7.752
                                                    c0.944,0.943,2.489,0.943,3.433,0L29.049,8.442C29.991,7.498,29.991,5.953,29.049,5.009z" />
                                            </svg>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<style>
    .wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: flex-end;
    }

    button {
        font-family: 'Ubuntu', sans-serif;
        position: relative;
        width: 150px;
        height: 50px;
        line-height: 1;
        font-size: 18px;
        font-weight: bold;
        letter-spacing: 1px;
        border: 1px solid #8C82FC;
        background: #fff;
        color: #8C82FC;
        border-radius: 40px;
        cursor: pointer;
        overflow: hidden;
        transition: all .35s;
    }

        button:hover {
            background: #8C82FC;
            color: #fff;
        }

        button span {
            opacity: 1;
            visibility: visible;
            transition: all .35s;
        }

    .success {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        border-radius: 50%;
        z-index: 1;
        opacity: 0;
        visibility: hidden;
        transition: all .35s;
    }

        .success svg {
            width: 20px;
            height: 20px;
            fill: yellowgreen;
            transform-origin: 50% 50%;
            transform: translateY(-50%) rotate(0deg) scale(0);
            transition: all .35s;
        }

    button.is_active {
        width: 50px;
        height: 50px;
    }

        button.is_active .success {
            opacity: 1;
            visibility: visible;
        }

            button.is_active .success svg {
                margin-top: 50%;
                transform: translateY(-50%) rotate(720deg) scale(1);
            }

        button.is_active span {
            opacity: 0;
            visibility: hidden;
        }
</style>

<script>
    const btn = document.querySelector("button");
    const form = document.getElementById('registerForm');

    btn.addEventListener("click", function (e) {
        e.preventDefault();
        active();

        // Simulate form submission
        setTimeout(() => {
            btn.classList.remove('is_active');
            form.submit();
        }, 1500);
    });

    function active() {
        btn.classList.toggle("is_active");
    }
</script>
